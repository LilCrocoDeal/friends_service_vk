# Документация проекта Friends Service
## Запуск
Для запуска необходимо скачать [Dockerfile](../FriendsService/Dockerfile), запустить docker и написать в терминал команду 

`docker build -t friends_service .`

Будет создан образ __friends_service__, который можно будет запустить при помощи ввода

`docker run -p 8080:8000 -it --name fs friends_service`

Теперь приложение должно стать доступно в браузере по адресу `127.0.0.1:8080`, однако, чтобы сразу получить доступ к функционалу, имеет смысл  перейти 
по адресу `127.0.0.1:8000/swagger/`.

При переходе пользователь попадает в спецификацию __OpenAPI__ по данному проекту.
## OpenAPI
Основой для написания спецификации использовалась python-библиотека __drf-yasg__, которая предоставляет базовую самогенерирующуюся OpenAPI спацификацию.
Конечно, основные методы и запросы были описаны дополнительно вручную. 

Спецификация написана полностью на английском языке, но вполне доступном для обычного пользователя. Способы использования сервиса были изложены в 
основном описании, однако все еще стоит подчекнуть, что:
- Пользователь может регистрироваться и авторизовываться по токену, все взаимодействия возможны только с корректным токеном авторизации в заголовке 
запроса (который прописывается в поле Authorize после получения). 
- Пользователь может отправлять запросы в друзья любому из существующих пользователей на сайте (кроме самого себя) и получать информацию о своих взаимоотношениях 
с ним.
- Пользователь может просмотреть заявки в друзья и принять или отклонить какую-либо заявку. Если пользователь соглашается, то отправитель оказывается 
в друзьях с пользователем.
- Пользователь может посмотреть список своих друзей и удалить кого-либо из него по мере необходимости.

## Нюансы взаимодействия
Если пользователь отклонил заявку в друзья, она не удаляется, а остается в заявках со статусом "отклонено". Так как в ТЗ ничего не было сказано про этот момент, 
было решено сделать это подобным образом для того, чтобы отправитель запроса не спамил повторными заявками в друзья.

Пользователь в любой момент может принять отклоненную заявку в друзья, сделав отправившего своим другом. Если же пользователь удаляет кого-то из списка 
друзей, то у него в заявках автоматически появляется запрос от этого друга со статусом "отклонено".

Как и требовалось, если пользователь отправляет заявку в ответ на уже полученную, он с адресатом оказываются друг у друга в друзьях.

Авторизация по токенам была взята из библиотеки djoser, однако подтверждение по email было опущено для простоты тестирования. Соответственно, в 
сгенерированной спецификации OpenAPI по пути `/authuser/` было подтянуто много ненужных иконок, которые не использовались в проекте. Среди них только 
`/authuser/ method: post` представляет интерес: это регистрация нового пользователя в класс _django.contrib.auth.models.User_.

Спецификация OpenAPI была написана так, чтобы только по ней можно было взаимодействовать знающему пользователю с реализованным сервисом. К каждому методу, 
требуемому в ТЗ, было написано лаконичное описание.

Код проекта я старался писать понятно, чтобы не было проблем с его чтением.

